<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Geodle - Daily Geography Clue Game</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 480px;
    margin: 20px auto;
    padding: 10px;
    background: #f0f4f8;
    color: #222;
  }
  h1 {
    text-align: center;
    margin-bottom: 5px;
  }
  #worldMap {
    height: 200px;
    width: 100%;
    border-radius: 10px;
    margin: 20px 0;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    overflow: hidden;
  }
  #clueBox {
    background: #d0e2ff;
    padding: 12px;
    margin: 20px 0;
    font-weight: bold;
    font-size: 1.2em;
    border-radius: 8px;
    text-align: center;
  }
  #guessForm {
    display: flex;
    justify-content: center;
    margin-bottom: 10px;
  }
  #guessInput {
    flex: 1;
    font-size: 1em;
    padding: 8px;
    border: 2px solid #0078d7;
    border-radius: 4px 0 0 4px;
    outline: none;
  }
  #guessButton {
    padding: 8px 15px;
    font-size: 1em;
    background: #0078d7;
    color: white;
    border: none;
    cursor: pointer;
    border-radius: 0 4px 4px 0;
    transition: background 0.3s;
  }
  #guessButton:hover:not(:disabled) {
    background: #005a9e;
  }
  #guessButton:disabled {
    background: #cccccc;
    cursor: not-allowed;
  }
  #feedback {
    text-align: center;
    font-weight: bold;
    margin: 10px 0;
  }
  #history {
    margin-top: 10px;
  }
  #history h3 {
    margin-bottom: 6px;
  }
  #historyList {
    list-style: none;
    padding-left: 0;
  }
  #historyList li {
    padding: 6px 10px;
    background: white;
    margin-bottom: 4px;
    border-radius: 4px;
    box-shadow: 0 0 3px #aaa;
    font-size: 0.95em;
  }
  #streak {
    text-align: center;
    font-size: 1.1em;
    margin: 12px 0;
    color: #0078d7;
    font-weight: bold;
  }
  #endScreen {
    background: #c2f0c2;
    padding: 15px;
    border-radius: 8px;
    margin-top: 20px;
    text-align: center;
    display: none;
  }
  #shareBtn {
    margin-top: 12px;
    background: #0078d7;
    color: white;
    border: none;
    padding: 8px 14px;
    cursor: pointer;
    font-size: 1em;
    border-radius: 6px;
  }
  #dailyLimitMsg {
    background: #ffd3d3;
    border: 1px solid #d64c4c;
    padding: 10px;
    border-radius: 8px;
    text-align: center;
    color: #d64c4c;
    font-weight: bold;
    margin: 20px 0;
  }
</style>
</head>
<body>
<h1>Geodle üåç</h1>
<div id="worldMap"></div>
<div id="clueBox">Loading clue...</div>
<form id="guessForm">
  <input type="text" id="guessInput" placeholder="Type your guess here" autocomplete="off" />
  <button id="guessButton" type="submit">Guess</button>
</form>
<div id="feedback"></div>
<div id="streak">üî• Streak: 0</div>
<div id="history">
  <h3>Guess History</h3>
  <ul id="historyList"></ul>
</div>
<div id="endScreen">
  <div id="resultMsg"></div>
  <button id="shareBtn">Share My Score</button>
</div>
<div id="dailyLimitMsg" style="display:none;">
  You've already played today! Come back tomorrow üëÄ
</div>
<script>
// Sample geography data - replace with your actual data source
const geographyData = [
  {
    answer: "FRANCE",
    clue: "This European country is famous for the Eiffel Tower and croissants"
  },
  {
    answer: "JAPAN",
    clue: "Island nation in East Asia known for sushi and cherry blossoms"
  },
  {
    answer: "EGYPT",
    clue: "Home to the Great Pyramid of Giza and the Sphinx"
  },
  {
    answer: "BRAZIL",
    clue: "Largest country in South America, famous for the Amazon rainforest"
  },
  {
    answer: "AUSTRALIA",
    clue: "Continent and country known for kangaroos and the Sydney Opera House"
  },
  {
    answer: "SINGAPORE",
    clue: "Small island city-state in Southeast Asia known for its gardens and food"
  },
  {
    answer: "CANADA",
    clue: "Second largest country in the world, famous for maple syrup"
  },
  {
    answer: "INDIA",
    clue: "South Asian country home to the Taj Mahal and Bollywood"
  }
];

let currentQuestion = null;
let guessHistory = [];
let gameEnded = false;
let maxGuesses = 6;

// Initialize the game
function initGame() {
  // Initialize the world map
  initWorldMap();
  
  // Get random question for today (you can make this date-based later)
  const randomIndex = Math.floor(Math.random() * geographyData.length);
  currentQuestion = geographyData[randomIndex];
  
  // Display the clue
  document.getElementById('clueBox').textContent = currentQuestion.clue;
  
  // Set up form submission
  document.getElementById('guessForm').addEventListener('submit', handleGuess);
  
  // Focus on input
  document.getElementById('guessInput').focus();
}

// Initialize Leaflet world map
function initWorldMap() {
  const map = L.map('worldMap', {
    center: [20, 0],
    zoom: 2,
    zoomControl: false,
    dragging: false,
    scrollWheelZoom: false,
    doubleClickZoom: false,
    touchZoom: false
  });

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '¬© OpenStreetMap contributors',
    maxZoom: 18
  }).addTo(map);

  // Add some visual flair with markers for major cities
  const majorCities = [
    { name: 'New York', coords: [40.7128, -74.0060] },
    { name: 'London', coords: [51.5074, -0.1278] },
    { name: 'Tokyo', coords: [35.6762, 139.6503] },
    { name: 'Sydney', coords: [-33.8688, 151.2093] },
    { name: 'Singapore', coords: [1.3521, 103.8198] },
    { name: 'S√£o Paulo', coords: [-23.5505, -46.6333] }
  ];

  majorCities.forEach(city => {
    L.circleMarker(city.coords, {
      radius: 4,
      fillColor: '#ff7800',
      color: '#000',
      weight: 1,
      opacity: 1,
      fillOpacity: 0.8
    }).addTo(map);
  });
}

function handleGuess(e) {
  e.preventDefault();
  
  if (gameEnded) return;
  
  const guess = document.getElementById('guessInput').value.trim().toUpperCase();
  
  if (!guess) return;
  
  // Add to history
  guessHistory.push(guess);
  
  // Check if correct
  if (guess === currentQuestion.answer) {
    showFeedback(`üéâ Correct! The answer is ${currentQuestion.answer}`, 'green');
    endGame(true);
  } else {
    showFeedback(`‚ùå ${guess} is not correct. Try again!`, 'red');
    
    // Check if out of guesses
    if (guessHistory.length >= maxGuesses) {
      showFeedback(`üòî Game Over! The answer was ${currentQuestion.answer}`, 'orange');
      endGame(false);
    }
  }
  
  // Update history display
  updateHistoryDisplay();
  
  // Clear input
  document.getElementById('guessInput').value = '';
}

function showFeedback(message, color) {
  const feedback = document.getElementById('feedback');
  feedback.textContent = message;
  feedback.style.color = color;
}

function updateHistoryDisplay() {
  const historyList = document.getElementById('historyList');
  historyList.innerHTML = '';
  
  guessHistory.forEach((guess, index) => {
    const li = document.createElement('li');
    li.textContent = `${index + 1}. ${guess}`;
    historyList.appendChild(li);
  });
}

function endGame(won) {
  gameEnded = true;
  document.getElementById('guessInput').disabled = true;
  document.getElementById('guessButton').disabled = true;
  
  const endScreen = document.getElementById('endScreen');
  const resultMsg = document.getElementById('resultMsg');
  
  if (won) {
    resultMsg.innerHTML = `üéâ Congratulations!<br>You guessed "${currentQuestion.answer}" in ${guessHistory.length} tries!`;
  } else {
    resultMsg.innerHTML = `üòî Better luck next time!<br>The answer was "${currentQuestion.answer}"`;
  }
  
  endScreen.style.display = 'block';
  
  // Set up share button
  document.getElementById('shareBtn').addEventListener('click', shareScore);
}

function shareScore() {
  const won = guessHistory[guessHistory.length - 1] === currentQuestion.answer;
  const scoreText = won ? 
    `üåç Geodle - I guessed "${currentQuestion.answer}" in ${guessHistory.length}/${maxGuesses} tries!` :
    `üåç Geodle - I couldn't guess "${currentQuestion.answer}" in ${maxGuesses} tries. Can you?`;
  
  if (navigator.share) {
    navigator.share({
      title: 'Geodle Score',
      text: scoreText,
      url: window.location.href
    });
  } else {
    // Fallback - copy to clipboard
    navigator.clipboard.writeText(scoreText + '\n' + window.location.href);
    alert('Score copied to clipboard!');
  }
}

// Start the game when page loads
document.addEventListener('DOMContentLoaded', initGame);
</script>
</body>
</html>
